import java.util.ArrayList;
import java.util.Arrays;
import java.util.Collections;
import java.util.Random;

public class 指派问题 {
    static double[][] efficiency=new double[][]{
            {0.5290469888143967, 0.725203512593833, 0.8297050663596732, 0.32409816501906274, 0.23078981027340817, 0.5189574391567237, 0.3510925243104288, 0.3498509089489582, 0.5861082355643338, 0.6455609940121659, 0.8968702541443476, 0.648816929987215, 0.04899670053736738, 0.04966815182226614, 0.886253739563845, 0.09994936951944611, 0.5580885799891497, 0.6508313469461149, 0.11399712119372019, 0.8984785069292872},
            {0.0458689512711955,0.08301228683759976,0.7348223178163958,0.7470987224268698,0.1393556156524719,0.6969496272596062,0.7603765416049699,0.9353934133407972,0.014925339955839112,0.35959312618112627,0.7389148928962017,0.3812587322862132,0.9803137992065825,0.17172885685114436,0.41388094326765335,0.4356264625977101,0.24841975056931642,0.3430835922620631,0.06478487336728356,0.010574979881699642},
            {0.5403944784457172,0.11361100191513773,0.9222559134968161,0.3809562754925484,0.6096003200559386,0.7903259350334438,0.5188710220759388,0.8309568554027472,0.5133728185967708,0.6809672475469317,0.08834001110879397,0.16954810039554724,0.4761229758104296,0.9489340801770764,0.15785240034727577,0.02257205972346643,0.4851674887769325,0.1883538110663434,0.2918688899444176,0.7242466137553605},
            {0.33977639771026547,0.8238046367287402,0.5403660444695881,0.5771638924220749,0.7342795554183559,0.2761296146655928,0.520520364110271,0.22739421408853844,0.09767393693756943,0.20394268544648586,0.21804328389354866,0.9100973705433191,0.33502670535970613,0.029841977800038832,0.5328563038758826,0.36108168233795435,0.3200692047489184,0.3910089646885072,0.31352126994957685,0.26104082187872824},
            {0.9737293273610738,0.11578671698283904,0.125817746628338,0.18173710172901292,0.02995154143723011,0.8209943888389327,0.28308587037951993,0.13718889991024097,0.1380042543671356,0.24914868674207213,0.729429611011094,0.00795953002420835,0.7795773708389301,0.020428225475365158,0.21160211850639277,0.30293322460777505,0.5893228219349195,0.5611291866543447,0.8013709739653893,0.9505033843600896},
            {0.05909388159856732,0.588526395307738,0.23738845429470112,0.06988724442679284,0.2789893357236971,0.6814665289837428,0.7440674254608991,0.9633200986224255,0.3224112864132369,0.1466856324864496,0.9546912515988993,0.8911712331237907,0.11769610427446375,0.6027557373547332,0.31696161709622506,0.5445630955000138,0.1654798396986562,0.44673054300405124,0.8914154590705731,0.5138637559654415},
            {0.25881148015381417,0.6429739615605171,0.7666182585855457,0.46646237240260824,0.44212785744867444,0.0793188294018703,0.4097679756817697,0.19352595853357657,0.8055570135356108,0.07261773539763483,0.14731990928001493,0.16297504885720826,0.3526170612910928,0.4739119504738448,0.6274699236111921,0.7247049158441863,0.10223004953654602,0.22285807403245805,0.5548096175745609,0.654117928699029},
            {0.7900714979621546,0.13171658103649875,0.2071938061513301,0.29132200010185416,0.019627895730732425,0.14112015618855467,0.24583692671202573,0.13588850662778207,0.47993609543226334,0.2830038498846884,0.11188224237446431,0.3908530636013513,0.8948300178192977,0.1104934311983733,0.866163232780071,0.6146806438089363,0.6976215166872198,0.4102119072665674,0.6736042140615557,0.33620619393212525},
            {0.03549433772605093,0.5993785460309428,0.2596829463575663,0.21510096211098217,0.5994909179121196,0.32823879254681854,0.5736050919488607,0.08920336861083622,0.9488239058306818,0.45777740172561177,0.5813166149692398,0.04009265104494386,0.45234566696297485,0.7633312353479856,0.5812068908863441,0.4295727125214095,0.70536037178785,0.42663241396855867,0.6863321672326621,0.712272297412908},
            {0.2965655022133311,0.6219760255628287,0.14921471548892917,0.7133568582733093,0.09776013076285284,0.27662150330893287,0.01875083073711703,0.9753866477986516,0.8280599417917823,0.39120001021062834,0.2134859874356847,0.7246443736278266,0.5047098601048703,0.14281476309148888,0.47149354926230225,0.9847951001716518,0.5341868777830725,0.36168509176004215,0.7943183340416035,0.3745299721699208},
            {0.6201373903437046,0.871599203942703,0.9409245631351216,0.16588432064749903,0.36879469602210924,0.6151043827489868,0.2473127516088156,0.2512101360992821,0.4578741114409507,0.4462779475703298,0.5484480304865786,0.7693213404695415,0.50154426583551,0.9670857795654393,0.2613679008301454,0.27512015789079813,0.2919254914808621,0.8077497993268083,0.7518143457564501,0.5020511343740106},
            {0.9266668795896866,0.30720931138530794,0.951462274411728,0.9630189540266092,0.44250569266501727,0.6366758032644749,0.8187919214490411,0.8629451918656479,0.9663145087518279,0.027444281262106518,0.6438799973300471,0.054927873616772094,0.06799239240946942,0.9135386867812512,0.3858611416417652,0.06200722412711368,0.9536586276861431,0.4804327565302572,0.20153678382327023,0.5078297880554928},
            {0.3729586661264145,0.32300185073882726,0.07458649911901039,0.6520421381095889,0.6308937707260486,0.6590254478684996,0.9870622362153397,0.11003466217820634,0.8924373465850669,0.8189737301956231,0.38832311054297186,0.25169475580397627,0.047302140799884596,0.5384762287114252,0.8112948085070181,0.22011791541820447,0.7625748877971308,0.9167840251743553,0.3619140462170093,0.9887643580860482},
            {0.9925355022060711,0.7727016249282588,0.4648455080736371,0.3843376914717036,0.137830438894198,0.5288780661907456,0.6870346166991435,0.542701344870433,0.2502706385623865,0.6860115637098086,0.6803868148659419,0.836437486531086,0.16487665675356267,0.41043540418126956,0.2858398814578951,0.9151923070336235,0.20739457127237537,0.7517174210100642,0.6233228542008769,0.13374027694694723},
            {0.17335840242403822,0.5313190013151873,0.5555715590809871,0.3077397347856752,0.6038757971818269,0.9990239172536841,0.2584971609776735,0.4334403207072005,0.9936656191402674,0.9407612836921081,0.7567808202959475,0.7351425908955515,0.4584777929223939,0.03961086340294839,0.19059437687989045,0.1629989896607097,0.561876574230015,0.9411932163434975,0.2678228676416532,0.2537839659992036},
            {0.4554711712751651,0.6553110910285844,0.8258920172330899,0.08855093353357024,0.22202782975815905,0.6376226242864712,0.6782798650062384,0.9336321263517289,0.32750047628093937,0.13829082924835634,0.9530185075177704,0.03522665699402905,0.3858671167612888,0.1789682255220909,0.9439683220360838,0.9528613575172094,0.0197621141887232,0.8251389143318956,0.0903738869775601,0.763297877869387},
            {0.46024521714630584,0.2577554432643142,0.07618707194821672,0.44399840026751447,0.6706495336290711,0.5162706701525669,0.1978693867728718,0.7540519042330679,0.20230354219699676,0.684580128015686,0.08786249164322169,0.9705012323609572,0.694021891333468,0.7220532103632956,0.6006420342508628,0.909301242003005,0.9126131019800408,0.10374683047062982,0.16924666306673553,0.7626761787366011},
            {0.4982525775566957,0.9270580824335396,0.2224006770464173,0.41843476762707654,0.12642151734151919,0.16648746528978298,0.3158251917718534,0.09183953010040402,0.6272138002704782,0.3138476244447185,0.47605948172744617,0.29691650613338894,0.7131641934684813,0.7281669098686869,0.8810905678950347,0.4116302857383455,0.3583533266138669,0.63770126025509,0.4093154869637363,0.35013863969378},
            {0.5443958075177369,0.8858815495076299,0.7768378227507353,0.14537977584962825,0.04301991594478627,0.19368800707383793,0.9528260200634855,0.5665345411091831,0.14029860926603888,0.9228572460507269,0.29363795647542645,0.24844480158684557,0.7241933716148484,0.06749133909897398,0.3686426239119789,0.1938584648158045,0.9549235159204713,0.47605280845626174,0.7641462848069964,0.9244103982734906},
            {0.8167758277682433,0.11139291222681713,0.24655751922338243,0.002537935689914228,0.2103203435810156,0.49337534550882656,0.5419012027819355,0.12406836079679939,0.8856000865281031,0.3368209880138494,0.6460190032709482,0.4900051180729159,0.43971362588068774,0.7969135567835428,0.018270014247404376,0.7060781358352057,0.8063117187286968,0.6648702928667085,0.23127168334673653,0.02991351076829807}
    };
    static int taskNum=20;
    static ArrayList<Integer> bestSol=new ArrayList<>();
    static Random random=new Random();

    static double temperature=1;
    static double alpha=0.98;
    public static double getCost(ArrayList<Integer>sol){
        double cost=0;
        for(int i=0;i<sol.size();i++){
            cost+=efficiency[i][sol.get(i)];
        }
        return cost;
    }

    public static ArrayList<Integer> localSearch(ArrayList<Integer> sol){
        int pos1=random.nextInt(sol.size()-1);
        int pos2=random.nextInt(sol.size()-1);
        Collections.swap(sol,pos1,pos2);
        return sol;
    }

    public static ArrayList<Integer> inner(ArrayList<Integer> sol){
        for(int i=0;i<10;i++){
            ArrayList<Integer> tempSol=new ArrayList<>();
            tempSol.addAll(sol);
            tempSol=localSearch(tempSol);
            double c1=getCost(sol);
            double c2=getCost(tempSol);
            if(c1>c2){
                double c3=getCost(bestSol);
                if(c3>c2){
                    for(int j=0;j<taskNum;j++){
                        bestSol.set(j,tempSol.get(j));
                    }
                }
                for(int j=0;j<taskNum;j++){
                    bestSol.set(j,tempSol.get(j));
                }
                sol= tempSol;
            }
            else {
                if(Math.exp((c1-c2)/temperature)>Math.random()){
                    sol= tempSol;
                }
            }
        }
        return sol;
    }

    public static void main(String[] args) {
        ArrayList<Integer> sol=new ArrayList<>();
        for(int i=0;i<taskNum;i++){
            sol.add(i);
        }
        bestSol.addAll(sol);
        //System.out.println(getCost(sol));
        ArrayList<Double> cost=new ArrayList<>();
        for(int i=0;i<500;i++){
            sol=inner(sol);
            cost.add(getCost(sol));
            temperature*=alpha;
        }
        System.out.println(cost);
        System.out.println(sol);
    }

}
